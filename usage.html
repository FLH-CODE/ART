<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maximera A: Användning</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <style>
        @font-face {
            font-family: 'CircularStd-Bold';
            src: url('font/CircularStd-Bold.otf') format('opentype');
        }

        @font-face {
            font-family: 'CircularStd-Book';
            src: url('font/CircularStd-Book.otf') format('opentype');
        }
        @font-face {
            font-family: 'IvarText-Regular';
            src: url('font/IvarText-Regular.otf') format('opentype');
        }
        body {
            font-family: 'CircularStd-Book', 'IvarText-Regular', Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #ebebeb;
            -webkit-font-smoothing: antialiased; /* För Safari och Chrome */
            -moz-osx-font-smoothing: grayscale; /* För Firefox på Mac */
        }

        .header {
            padding: 20px;
        }

        .header h1 {
            font-size: 4em;
            margin: 0;
            font-family: 'CircularStd-Bold', Arial, sans-serif;
            font-style: bold;
        }

        .header p {
            font-size: 1.3em;
            color: #000000;
            font-family: 'IvarText-Regular', Arial, sans-serif;
            max-width: 60%;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 60px;
            justify-content: center;
            padding: 20px;
        }

        .column {
            flex: 1 1 250px;
            background-color: #ebebeb;
            padding: 20px;
            border-radius: 0px;
            box-shadow: none;
            text-align: left;
        }

        .column h2 {
            margin-bottom: 5; /* Ta bort extra radavstånd */
            font-size: 0.9em;
            font-family: 'CircularStd-Bold', Arial, sans-serif;
            color: #000000;
            letter-spacing: 0.03em;
            font-style: bold;
        }

        .column p {
            margin-top: 0; /* Ta bort extra radavstånd */
            margin-bottom: 20px;
            font-size: 0.9em;
            font-family: 'CircularStd-Book', Arial, sans-serif;
            color: #000000;
            font-style: normal;
        }
        .column .more-text {
            display: none;
            
        }

        .column .toggle-button {
            cursor: pointer;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-top: 10px;
            transition: transform 0.5s ease; /* Lägg till övergång för rotation */
        }

        .column .toggle-button svg {
            width: 15px;
            height: 15px;
            transform: rotate(-45deg);
            transition: transform 0.5s ease; /* Lägg till övergång för rotation */
        }

        .column .toggle-button:hover svg {
            transform: rotate(45deg); /* Roterar pilen 90 grader vid hover */
        }

        .column.expanded .toggle-button svg {
            transform: rotate(90deg); /* Roterar pilen 90 grader när expanderad */
        }

        .column.expanded .more-text {
            display: block;
        }

        .column.expanded .toggle-button svg {
            transform: rotate(45deg);
        }

        .column .number-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .column .number-options span {
            display: inline-block;
            width: 23px;
            height: 23px;
            line-height: 23px;
            text-align: center;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            font-size: 0.8em; /* Minska font size */
        }

        .column .number-options span:hover {
            background-color: rgb(0, 0, 0);
            color: white;
        }

        .column .number-options span.selected {
            background-color: rgb(0, 0, 0);
            color: white;
        }
        .column label {
            font-size: 0.9em; /* Ändra storlek på label */
            margin-bottom: 10px; /* Lägg till marginal under label */
            margin-top: 50px;
            display: block; /* Gör label till blockelement */
            font-family: 'CircularStd-Book', Arial, sans-serif;
            color: #000000;
            font-style: normal;
        }
        .column textarea {
            width: calc(100% - 20px);
            height: 100px;
            padding: 10px;
            border: none;
            background: linear-gradient(to bottom, #5f5f5f 0.1px, transparent 1px) repeat-y; /* Ändra färg och tjocklek här */
            background-size: 100% 20px; /* Justera avståndet mellan linjerna */
            background-position: 0 5px; /* Flytta ned linjerna några pixlar */
            margin-top: 10px;
            font-family: 'CircularStd-Book', Arial, sans-serif;
            font-size: 0.9em;
            color: #000000;
            line-height: 20px;
            resize: none;
            outline: none; /* Ta bort den svarta rutan */
        }
        

        .submit-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 10px;
    border: none;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 55px;
}

        .submit-button svg {
            margin-left: 10px;
            width: 40px; /* Anpassa efter behov */
            height: 40px;
        }


        .slide-up {
            transform: translateY(-100%);
            transition: transform 1s ease-in-out;
        }

        #doughnutChart {
            position: absolute;
            top: 50px;
            right: 50px;
            width: 200px;
            height: 200px;
        }
    </style>
</head>
<body class="usage-page">
    <div class="header">
        <h1>Maximera A: Användning</h1>
        <p>Användning handlar om att maximera nyttan. Varför behövs den här platsen eller byggnaden? Vilket syfte ska den tjäna? Hur kan den utnyttjas på bästa sätt? Hur kan den bidra till samhället, föra människor samman, öka tryggheten, utmana normer? Användningen är inte bara kopplad till människor utan kan även ses i ett större perspektiv med biodiversitet och främjande av lokala ekosystem.
        </p>
    </div>
    <div id="doughnutChart"></div>
    <div class="container">
        <div class="column">
            <h2>NYTTJANDE</h2>
            <p>En dåligt utnyttjad byggnad eller plats är inte hållbar...
            <span class="more-text">Genom optimalt utnyttjade miljöer minskas behovet av nybyggnation. Beakta nyttjandegrad i olika delar av projektet och skapa miljöer som är multifunktionella och anpassade både för dagens och framtidens behov. Nyttjandegraden ökas genom t ex samutnyttjande av lokaler över dygnet/veckan/säsongen/året och mellan olika verksamheter. Använd exempelvis strategisk lokalplanering och datainsamling för att säkerställa nyttjandegraden, identifiera ytbehovet och fatta välgrundade beslut.</span>
            </p>
            <div class="toggle-button" onclick="toggleText(this)">
                <svg id="Lager_1" data-name="Lager 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.13 6.13">
                    <defs>
                        <style>
                            .cls-1 {
                                stroke-miterlimit: 10;
                            }

                            .cls-1, .cls-2 {
                                fill: none;
                                stroke: #000;
                                stroke-linecap: round;
                                stroke-width: 1px;
                            }

                            .cls-2 {
                                stroke-linejoin: round;
                            }
                        </style>
                    </defs>
                    <polyline class="cls-2" points=".98 5.88 5.55 5.55 5.88 .98"/>
                    <line class="cls-1" x1="5.55" y1="5.55" x2=".25" y2=".25"/>
                </svg>
            </div>
            <label for="categoryA">På en skala från ett till fem, hur prioriterat är arbetet med Nyttjande i det aktuella projektet?</label>
            <div class="number-options" id="numberOptionsA">
                <span onclick="selectNumber(this, 'categoryA')">1</span>
                <span onclick="selectNumber(this, 'categoryA')">2</span>
                <span onclick="selectNumber(this, 'categoryA')">3</span>
                <span onclick="selectNumber(this, 'categoryA')">4</span>
                <span onclick="selectNumber(this, 'categoryA')">5</span>
            </div>
            <input type="hidden" id="categoryA" name="categoryA">
            <label for="commentsA">Kommentarer:</label>
            <textarea id="commentsA" name="commentsA" rows="4"></textarea>
        </div>
        <div class="column">
            <h2>VÄLMÅENDE</h2>
            <p>Arkitektur påverkar människors mående, såväl fysiskt som psykiskt...
            <span class="more-text">Utforma den byggda miljön så att den bidrar till ökad trygghet (faktisk och upplevd). Trygghet kan uppnås genom igenkänning, överblick, greppbarhet, möjlighet till kontroll och känsla av tillhörighet och identifikation samt genom hög arkitektonisk kvalitet. Beakta vilka miljöer som bidrar till förbättrad hälsa och välbefinnande. Det kan t.ex. handla om att utforma trappan mer lockande än hissen, en god ljudmiljö eller tillgång till grönområden och blåa strukturer. Naturliga material som exempelvis trä, sten och lera bidrar också till ökat välbefinnande.</span>
            </p>
            <div class="toggle-button" onclick="toggleText(this)">
                <svg id="Lager_1" data-name="Lager 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.13 6.13">
                    <defs>
                        <style>
                            .cls-10 {
                                stroke-miterlimit: 10;
                            }

                            .cls-10, .cls-20 {
                                fill: none;
                                stroke: #000;
                                stroke-linecap: round;
                                stroke-width: 1px;
                            }

                            .cls-20 {
                                stroke-linejoin: round;
                            }
                        </style>
                    </defs>
                    <polyline class="cls-20" points=".98 5.88 5.55 5.55 5.88 .98"/>
                    <line class="cls-10" x1="5.55" y1="5.55" x2=".25" y2=".25"/>
                </svg>
            </div>
            <label for="categoryB">På en skala från ett till fem, hur prioriterat är arbetet med Välmående i det aktuella projektet?
            </label>
            <div class="number-options" id="numberOptionsB">
                <span onclick="selectNumber(this, 'categoryB')">1</span>
                <span onclick="selectNumber(this, 'categoryB')">2</span>
                <span onclick="selectNumber(this, 'categoryB')">3</span>
                <span onclick="selectNumber(this, 'categoryB')">4</span>
                <span onclick="selectNumber(this, 'categoryB')">5</span>
            </div>
            <input type="hidden" id="categoryB" name="categoryB">
            <label for="commentsB">Kommentarer:</label>
            <textarea id="commentsB" name="commentsB" rows="4"></textarea>
        </div>
        <div class="column">
            <h2>INKLUDERING</h2>
            <p>Social integration och möjligheter att mötas på lika villkor...
                <span class="more-text">uppmuntrar till samvaro och minskar ensamheten. Skapa miljöer som bjuder in och lockar alla olika typer av människor till vistelse och umgänge. Beakta inkludering och mångfald genom att eftersträva lika tillgång till kvaliteter, oavsett ekonomiska resurser, sociala resurser, ålder och kön. Arbeta med inkludering i både process och resultat, t.ex. genom varierade boendeformer, medborgardialog, brukarmedverkan, inkluderande design och barnperspektiv.</span>
            </p>
            <div class="toggle-button" onclick="toggleText(this)">
                <svg id="Lager_1" data-name="Lager 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.13 6.13">
                    <defs>
                        <style>
                            .cls-100 {
                                stroke-miterlimit: 10;
                            }

                            .cls-100, .cls-200 {
                                fill: none;
                                stroke: #000;
                                stroke-linecap: round;
                                stroke-width: 1px;
                            }

                            .cls-200 {
                                stroke-linejoin: round;
                            }
                        </style>
                    </defs>
                    <polyline class="cls-200" points=".98 5.88 5.55 5.55 5.88 .98"/>
                    <line class="cls-100" x1="5.55" y1="5.55" x2=".25" y2=".25"/>
                </svg>
            </div>
            <label for="categoryC">På en skala från ett till fem, hur prioriterat är arbetet med Inkludering i det aktuella projektet?</label>
            <div class="number-options" id="numberOptionsC">
                <span onclick="selectNumber(this, 'categoryC')">1</span>
                <span onclick="selectNumber(this, 'categoryC')">2</span>
                <span onclick="selectNumber(this, 'categoryC')">3</span>
                <span onclick="selectNumber(this, 'categoryC')">4</span>
                <span onclick="selectNumber(this, 'categoryC')">5</span>
            </div>
            <input type="hidden" id="categoryC" name="categoryC">
            <label for="commentsC">Kommentarer:</label>
            <textarea id="commentsC" name="commentsC" rows="4"></textarea>
        </div>
        <div class="column">
            <h2>BETEENDEFÖRÄNDRING</h2>
            <p>Nyttja arkitekturen för att bryta sambandet mellan...
                <span class="more-text">ekonomiskt välstånd och negativ påverkan på planeten, exempelvis genom att uppmuntra lokal matproduktion och fler delade funktioner. Beakta arkitekturens förmåga att uppmuntra en hållbar livsstil. Genom att möjliggöra samnyttjande och delning skapas incitament för att få tillgång till mer utan att äga.  En tät och attraktiv stad med korta avstånd mellan olika målpunkter minskar behovet av resande. Mobilitetshubbar underlättar en bilfri vardag, fler transportslag och möjliggör en mer hållbar konsumtion med exempelvis samordnade leveranser.</span>
            </p>
            <div class="toggle-button" onclick="toggleText(this)">
                <svg id="Lager_1" data-name="Lager 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.13 6.13">
                    <defs>
                        <style>
                            .cls-1000 {
                                stroke-miterlimit: 10;
                            }

                            .cls-1000, .cls-2000 {
                                fill: none;
                                stroke: #000;
                                stroke-linecap: round;
                                stroke-width: 1px;
                            }

                            .cls-2000 {
                                stroke-linejoin: round;
                            }
                        </style>
                    </defs>
                    <polyline class="cls-2000" points=".98 5.88 5.55 5.55 5.88 .98"/>
                    <line class="cls-1000" x1="5.55" y1="5.55" x2=".25" y2=".25"/>
                </svg>
            </div>
            <label for="categoryD">På en skala från ett till fem, hur prioriterat är arbetet med Beteendeförändring i det aktuella projektet?
            </label>
            <div class="number-options" id="numberOptionsD">
                <span onclick="selectNumber(this, 'categoryD')">1</span>
                <span onclick="selectNumber(this, 'categoryD')">2</span>
                <span onclick="selectNumber(this, 'categoryD')">3</span>
                <span onclick="selectNumber(this, 'categoryD')">4</span>
                <span onclick="selectNumber(this, 'categoryD')">5</span>
            </div>
            <input type="hidden" id="categoryD" name="categoryD">
            <label for="commentsD">Kommentarer:</label>
            <textarea id="commentsD" name="commentsD" rows="4"></textarea>
        </div>
        <div class="column">
            <h2>BIODIVERSITET</h2>
            <p>Bevarande och upprätthållande av fungerande ekosystem...
                <span class="more-text">skapar förutsättningar för goda livsmiljöer för människor. Bidra till en rikedom av arter, genetisk variation och beakta biodiversitet i form av växtlighet och djur på platsen. Ökad biodiversitet kan uppnås genom att tex bevara befintliga grönstrukturer, plantera träd, anlägga biotoptak och gröna utemiljöer med plats för större vegetation, boplatser för fåglar, fladdermöss och insekter. Inventera biodiversitet och dess värden på platsen i ett tidigt skede för att säkerställa att livsmiljöer för djur och växter tillgodoses.</span>
            </p>
            <div class="toggle-button" onclick="toggleText(this)">
                <svg id="Lager_1" data-name="Lager 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.13 6.13">
                    <defs>
                        <style>
                            .cls-10000 {
                                stroke-miterlimit: 10;
                            }

                            .cls-10000, .cls-20000 {
                                fill: none;
                                stroke: #000;
                                stroke-linecap: round;
                                stroke-width: 1px;
                            }

                            .cls-20000 {
                                stroke-linejoin: round;
                            }
                        </style>
                    </defs>
                    <polyline class="cls-20000" points=".98 5.88 5.55 5.55 5.88 .98"/>
                    <line class="cls-10000" x1="5.55" y1="5.55" x2=".25" y2=".25"/>
                </svg>
            </div>
            <label for="categoryE">På en skala från ett till fem, hur prioriterat är arbetet med Biodiversitet i det aktuella projektet?
            </label>
            <div class="number-options" id="numberOptionsE">
                <span onclick="selectNumber(this, 'categoryE')">1</span>
                <span onclick="selectNumber(this, 'categoryE')">2</span>
                <span onclick="selectNumber(this, 'categoryE')">3</span>
                <span onclick="selectNumber(this, 'categoryE')">4</span>
                <span onclick="selectNumber(this, 'categoryE')">5</span>
            </div>
            <input type="hidden" id="categoryE" name="categoryE">
            <label for="commentsE">Kommentarer:</label>
            <textarea id="commentsE" name="commentsE" rows="4"></textarea>
        </div>
    </div>
    <button class="submit-button" onclick="goToNextPage()"title="Nästa">
        <svg id="Lager_3" data-name="Lager 3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
            <defs>
              <style>
                .cls-71 {
                  stroke-linejoin: round;
                }
          
                .cls-71, .cls-72 {
                  fill: none;
                  stroke: #000;
                  stroke-linecap: round;
                  stroke-width: 1.7px;
                }
                .cls-73 {
                    fill: none;
                    stroke: #000;
                    stroke-linecap: round;
                    stroke-width: 1px;
                  }
          
                .cls-72 {
                  stroke-miterlimit: 10;
                }
                .submit-button:hover .cls-71, .submit-button:hover .cls-72 {
                    stroke: #fff; /* Vit färg vid hover */
                }
                .submit-button:hover .cls-73 {
                    fill: #000; /* Svart fyllning vid hover */
                }
              </style>
            </defs>
            <circle class="cls-73" cx="15.65" cy="15.65" r="15"/>
            <g>
              <polyline class="cls-71" points="6.7 17.58 15.65 25.33 24.59 17.58"/>
              <line class="cls-72" x1="15.65" y1="25.33" x2="15.65" y2="5.96"/>
            </g>
          </svg>
    </button>

    <script>
        function toggleText(button) {
            const column = button.closest('.column');
            column.classList.toggle('expanded');
        }

        var chart = echarts.init(document.getElementById('doughnutChart'));

        function updateChart() {
    const totalCategories = 15;
    let storedProgress = JSON.parse(localStorage.getItem('progress')) || { page1: 0, page2: 0, page3: 0 };

    let currentPage = "page1"; // This is the "Time" page
    let categories = ['categoryA', 'categoryB', 'categoryC', 'categoryD', 'categoryE'];

    // Count only the answers for this page
    let filledCategories = categories.filter(id => document.getElementById(id).value !== "").length;

    // Save progress for this page only
    storedProgress[currentPage] = filledCategories;
    localStorage.setItem('progress', JSON.stringify(storedProgress));

    // Calculate total filled categories across all pages
    let totalFilled = (storedProgress.page1 || 0) + (storedProgress.page2 || 0) + (storedProgress.page3 || 0);

    // Prevent over-counting
    if (totalFilled > totalCategories) {
        totalFilled = totalCategories;
    }

    let percentage = Math.round((totalFilled / totalCategories) * 100);

            var option = {
                series: [
                {
                name: 'Bakgrund',
                type: 'pie',
                radius: ['50%', '70%'],
                avoidLabelOverlap: false,
                label: {
                    show: false
                },
                labelLine: {
                    show: false
                },
                data: [
                    { 
                        value: totalCategories, 
                        name: 'Bakgrund', 
                        itemStyle: { 
                            color: '#d3d3d3' // Ljusgrå färg för bakgrunden
                        } 
                    }
                ]
            },
            
                    {
                        name: 'Procent',
                        type: 'pie',
                        radius: ['50%', '70%'],
                        avoidLabelOverlap: false,
                        label: {
                            show: true,
                            position: 'center',
                            formatter: totalFilled > 0 ? `${percentage}%` : '',
                            fontSize: 30,
                            fontWeight: 'bold',
                            fontFamily: 'CircularStd-Bold',
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: '30',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                    { 
                        value: totalFilled, 
                        name: 'Fylld', 
                        itemStyle: { 
                            color: '#000000', 
                            borderRadius: [10, 10, 10, 10] // Rundade kanter på båda sidor 
                        } 
                    },
                    { 
                        value: Math.max(totalCategories - totalFilled, 0), // Prevent negative values 
                        name: 'Ej fylld', 
                        itemStyle: { color: 'transparent' } 
                    }
                ]
            }
        ]
    };

            chart.setOption(option);
        }
        function selectNumber(element, categoryId) {
        const numberOptions = element.parentElement.querySelectorAll('span');
        numberOptions.forEach(option => option.classList.remove('selected'));
        element.classList.add('selected');
        document.getElementById(categoryId).value = element.textContent;
        updateChart(); // Update the chart
    }

        function goToNextPage() {
            document.body.classList.add('slide-up');
            setTimeout(() => {
                window.location.href = 'resources.html';
            }, 1000); // Match the duration of the slide-up transition
        }

        // Initial chart update
        window.onload = updateChart;
    </script>
</body>
</html>
